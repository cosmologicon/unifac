<!doctype html>
<title>Ludum Dare 29</title>
<canvas id=canvas></canvas>
<script src="../UFX/src/resource.js"></script>
<script src="../UFX/src/draw.js"></script>
<script src="../UFX/src/maximize.js"></script>
<script src="../UFX/src/key.js"></script>
<script src="../UFX/src/ticker.js"></script>
<script src="../UFX/src/scene.js"></script>
<script src="../UFX/src/random.js"></script>
<script src="../UFX/src/noise.js"></script>
<script src="../UFX/src/texture.js"></script>
<script src="../UFX/src/Thing.js"></script>

<script src="play.js"></script>
<script src="state.js"></script>
<script src="things.js"></script>
<script src="weapons.js"></script>
<script src="camera.js"></script>
<script src="settings.js"></script>
<script src="effects.js"></script>
<script src="content.js"></script>
<script>
var tau = 6.283185307179586
var canvas = document.getElementById("canvas")
var context = canvas.getContext("2d")
UFX.draw.setcontext(context)
UFX.key.init()
UFX.key.remaparrows(true)
UFX.key.qdown = true

UFX.maximize.fill(canvas, "total")

UFX.scenes.title = {
	think: function () {
		if (UFX.key.ispressed.space) {
			UFX.scene.swap("play")
		}
	},
	draw: function () {
		UFX.draw("fs brown f0")
	},
}

UFX.scenes.death = {
	start: function () {
		this.t = 0
	},
	think: function (dt) {
		this.t += dt
		if (this.t > 2) UFX.scene.swap("title")
	},
	draw: function () {
		if (this.t < 1) {
			UFX.scenes.play.draw()
		} else {
			UFX.scenes.title.draw()
		}
		var alpha = 1 - Math.abs(this.t - 1)
		UFX.draw("[ fs red alpha", alpha, "f0 ]")
	},
}

UFX.resource.onload = function () {
	UFX.scene.init()
	UFX.scene.push("title")
}

UFX.resource.loadwebfonts("Viga", "Pirata One", "Sansita One")
UFX.resource.load({
	gamedata: "gamedata.json",
})

</script>


